# 网络

#### HTTP

- HTTP(**超文本传输协议**)

- 状态码

  | 状态码 |    含义    |                             详情                             |
  | :----: | :--------: | :----------------------------------------------------------: |
  |  200   |    成功    |              服务器成功处理了请求，**返回内容**              |
  |  204   |   无内容   |          服务器成功处理了请求，但是**没有返回内容**          |
  |  301   | 永久重定向 |   请求的网页已经移动到了新位置，服务器自动将请求转到新地址   |
  |  302   | 临时重定向 | 服务器目前从不同的位置的网页响应请求，但请求者应继续使用原有的位置进行请求 |
  |  304   |  资源缓存  |                                                              |
  |  400   |  错误请求  |           服务器不理解请求的语法（一般是参数错误）           |
  |  401   |   未授权   |                                                              |
  |  403   |    禁止    |         服务器拒绝请求（一般是客户端的用户权限不够）         |
  |  404   |   未找到   |                       服务器找不到资源                       |
  |  500   | 服务器错误 |                       服务器内发生错误                       |

- 响应首部

  - content-type

#### HTTPS(todo)

#### DNS(Domain Name System) 域名系统

- DNS 协议提供的是一种主机名到 IP 地址的转换服务，就是我们常说的域名系统。

- ##### 查询过程

  - 从"根域名服务器"查到"顶级域名服务器"的 NS 记录和 A 记录（ IP 地址）。
  - 从"顶级域名服务器"查到"次级域名服务器"的 NS 记录和 A 记录（ IP 地址）。
  - 从"次级域名服务器"查出"主机名"的 IP 地址。

#### CDN(内容分发网络)

-  指的是一组分布在各个地区的服务器。
- 这些服务器存储着数据的副本，因此服务器可以根据哪些服务器与用户距离最近，来满足数据的请求。

#### TCP 三次握手四次挥手

- 因为 TCP 连接时全双工的，即通信的双方都可以向对方发送信息和接收信息，所以断开连接需要双方确认

- SYN：`synchronization`（同步）ACK : `acknowledgment`（确认）FIN：（完成）

- **三次握手**

  - 第一次握手：`客户端`向服务端发送一个 SYN 连接请求的报文，SYN 的标志位为１，生成随机序号，作为客户端数据的初始序号

  - 第二次握手：`服务端`收到客户端发送的 SYN 报文，服务器首先会为该连接分配 TCP 缓存和变量，让后向客户端发送 SYN+ACK 信号，服务器生成自己的序号，并将第一次握手时客户端生成的`序号+1`做为确认号，一起发送给客户端。

  - 第三次握手：`客户端`接收到服务端的 SYN+ACK 信号，开启客户端的 ACK 信号。将序号+1 ,确认号:是服务器发送的序号+1

  - |            |        流向        |  报文段  |          序号和确认号           |
    | :--------: | :----------------: | :------: | :-----------------------------: |
    | 第一次握手 | 客户端 ===> 服务器 |   SYN    |       序号：N(客户端初始)       |
    | 第二次握手 | 服务器 ===> 客户端 | SYN+ ACK | 序号：M(服务端初始) 确认号：N+1 |
    | 第三次握手 | 客户端 ===> 服务端 |   ACK    |      序号：N+1 确认号：M+1      |

- **四次挥手**

  - 第一次挥手：`客户端` 发送 FIN+ ACK 报文段，

  - 第二次挥手：` 服务端` 发送 ACK 来进行确认，序号用对方的确认号，确认号用对方的序号+1

  - 第三次挥手：`服务端`可能还有未发送的数据，等到服务端发送完数据，服务端发送一个 FIN+ACK l 来进行最后的确认，此时的序号和确认号不变。

  - 第四次挥手：`客户端` 得到最终的结果后发送 ACK 来进行确认，序号用对方的确认号，确认号用对方的序号+1

  - |            |        流向        | 报文段  | 序号和确认号          |
    | :--------: | :----------------: | :-----: | :-------------------- |
    | 第一次挥手 | 客户端 ===> 服务器 | FIN+ACK | 序号：N 确认号：M     |
    | 第二次挥手 | 服务器 ===> 客户端 |   ACK   | 序号：M 确认号：N+1   |
    | 第三次挥手 | 服务器 ===> 客户端 | FIN+ACK | 序号：M 确认号：N+1   |
    | 第四次挥手 | 客户端 ===> 服务端 |   ACK   | 序号：N+1 确认号：M+1 |

  - TCP 使用四次挥手的原因是因为 TCP 的连接是全双工的，所以需要双方分别释放到对方的连接，单独一方的连接释放，只代 表不能再向对方发送数据，连接处于的是半释放的状态。

  - 最后一次挥手中，客户端会等待一段时间再关闭的原因，是为了防止发送给服务器的确认报文段丢失或者出错，从而导致服务器 端不能正常关闭。

#### no-cache 和 no-store

- `no-cache`：表示可以进行缓存，但是每次需要和服务器进行确认，同时代理服务器也不能对资源进行缓存
- `no-store`：表示浏览器不要缓存资源，每次向服务器请求资源

#### HTTP1.0 和 HTTP1.1 的区别

- 连接方面：HTTP1.1 默认使用持久连接，http1.0 默认使用非持久连接。
- 资源请求方面的区别，在 http1.0 中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了。HTTP1.1 支持断点连接。
- 缓存方面的区别，在 http1.0 中主要使用 header 里的 If-Modified-Since,Expires 来做为缓存判断的标准，http1.1 则引入了更多的缓存控制策略例如 Etag、If-Unmodified-Since、If-Match、If-None-Match 等更多可供选择的缓存头来控制缓存策略。
- http1.1 中还新增了 host 字段，用来指定服务器的域名。
- http1.1 相对于 http1.0 还新增了很多方法，如 PUT、HEAD、OPTIONS 等。

#### GET 和 POST 的区别

- 从应用场景来说：
  - GET 请求一般用于对服务器资源不会产生影响的场景，比如请求一个网页
  - POST 请求一般用于对服务器资源会产生影响的情景。比如注册用户这一类的操作。
- 缓存
  - 一般浏览器会对 GET 请求缓存，很少对 POST 请求缓存
- 发送的报文格式
  - GET 请求的报文实体为空
  - POST 报文中实体部分一般为向服务器发送的数据。
- Get 请求也可以将请求的参数放入 url 中向服务器发送，这样的做法相对于 Post 请求来说，一个方面是不太安全，
  因为请求的 url 会被保留在历史记录中。
- url 还有长度限制
- 还有就是 post 的参数传递支持更多的数据类型。